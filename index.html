<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revolutionary Moon Phase Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- Cosmic Background Effects -->
    <div class="cosmic-bg">
        <div class="starfield-layer" id="starfield1"></div>
        <div class="starfield-layer" id="starfield2"></div>
        <div class="starfield-layer" id="starfield3"></div>
        <div class="nebula-effect"></div>
    </div>

    <!-- Navigation Header -->
    <header class="nav-header">
        <div class="nav-content">
            <div class="logo-section">
                <div class="logo-icon">üåô</div>
                <h1 class="logo-text">LUNAR NEXUS</h1>
                <div class="subtitle">Advanced Moon Phase Observatory</div>
            </div>
            <div class="nav-controls">
                <button id="themeToggle" class="control-btn" title="Toggle Theme">
                    <span class="btn-icon">üåì</span>
                </button>
                <button id="locationBtn" class="control-btn" title="Detect Location">
                    <span class="btn-icon">üìç</span>
                </button>
                <button id="helpBtn" class="control-btn" title="Lunar Guide">
                    <span class="btn-icon">‚ùì</span>
                </button>
                <button id="shareBtn" class="control-btn" title="Share Observatory">
                    <span class="btn-icon">üì§</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Observatory Interface -->
    <main class="observatory-main">
        <!-- Hero Moon Display -->
        <section class="moon-hero">
            <div class="hero-content">
                <div class="moon-viewport">
                    <div class="moon-3d-container" id="moon3DContainer">
                        <canvas id="moon3DCanvas"></canvas>
                        <div class="moon-loading" id="moonLoading">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Rendering Moon...</div>
                        </div>
                    </div>
                    <div class="moon-controls">
                        <button id="moonRotateBtn" class="moon-ctrl-btn">üîÑ Rotate</button>
                        <button id="moonZoomBtn" class="moon-ctrl-btn">üîç Zoom</button>
                        <button id="moonResetBtn" class="moon-ctrl-btn">‚ö° Reset</button>
                    </div>
                </div>
                
                <div class="lunar-data-panel">
                    <div class="phase-display">
                        <h2 id="currentPhaseName" class="phase-name">Loading Phase...</h2>
                        <div class="phase-emoji" id="currentPhaseEmoji">üåë</div>
                        <div class="phase-description" id="currentPhaseDesc">Calculating lunar position...</div>
                    </div>
                    
                    <div class="data-grid">
                        <div class="data-card illumination-card">
                            <div class="data-icon">üí°</div>
                            <div class="data-content">
                                <div class="data-label">Illumination</div>
                                <div class="data-value" id="illuminationValue">0%</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="illuminationProgress"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="data-card distance-card">
                            <div class="data-icon">üìè</div>
                            <div class="data-content">
                                <div class="data-label">Distance</div>
                                <div class="data-value" id="distanceValue">0 km</div>
                                <div class="data-subtext" id="distanceSubtext">from Earth</div>
                            </div>
                        </div>
                        
                        <div class="data-card age-card">
                            <div class="data-icon">‚è≥</div>
                            <div class="data-content">
                                <div class="data-label">Lunar Age</div>
                                <div class="data-value" id="lunarAge">0 days</div>
                                <div class="data-subtext">since new moon</div>
                            </div>
                        </div>
                        
                        <div class="data-card next-phase-card">
                            <div class="data-icon">‚è≠Ô∏è</div>
                            <div class="data-content">
                                <div class="data-label">Next Phase</div>
                                <div class="data-value" id="nextPhaseName">Loading...</div>
                                <div class="data-subtext" id="nextPhaseTime">in 0 days</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="realtime-stats">
                        <h3 class="stats-title">Real-Time Observatory Data</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Moonrise</span>
                                <span class="stat-value" id="moonriseTime">--:--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Moonset</span>
                                <span class="stat-value" id="moonsetTime">--:--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Altitude</span>
                                <span class="stat-value" id="moonAltitude">--¬∞</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Azimuth</span>
                                <span class="stat-value" id="moonAzimuth">--¬∞</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Best Viewing</span>
                                <span class="stat-value" id="bestViewingTime">--:--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Constellation</span>
                                <span class="stat-value" id="moonConstellation">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Date Navigation -->
        <section class="date-navigation">
            <div class="nav-container">
                <h3 class="section-title">Temporal Navigation</h3>
                <div class="date-controls">
                    <button id="prevWeek" class="nav-btn nav-btn--major">‚è™ Week</button>
                    <button id="prevDay" class="nav-btn">‚Üê Day</button>
                    <input type="date" id="dateInput" class="date-input">
                    <button id="todayBtn" class="nav-btn nav-btn--today">Today</button>
                    <button id="nextDay" class="nav-btn">Day ‚Üí</button>
                    <button id="nextWeek" class="nav-btn nav-btn--major">Week ‚è©</button>
                </div>
                <div class="quick-dates">
                    <button class="quick-date-btn" data-offset="-30">30 Days Ago</button>
                    <button class="quick-date-btn" data-offset="0">Today</button>
                    <button class="quick-date-btn" data-offset="30">30 Days Ahead</button>
                    <button class="quick-date-btn" data-offset="365">1 Year Ahead</button>
                </div>
            </div>
        </section>

        <!-- 7-Day Forecast with Animations -->
        <section class="forecast-section">
            <div class="forecast-header">
                <h3 class="section-title">7-Day Lunar Forecast</h3>
                <button id="expandForecast" class="expand-btn">
                    <span class="expand-text">Expand Forecast</span>
                    <span class="expand-icon">üìÖ</span>
                </button>
            </div>
            <div class="forecast-container" id="forecastContainer">
                <div class="forecast-grid" id="forecastGrid">
                    <!-- Forecast cards will be generated here -->
                </div>
            </div>
        </section>

        <!-- Educational Observatory -->
        <section class="education-section">
            <div class="education-header">
                <h3 class="section-title">Lunar Observatory</h3>
                <div class="education-tabs">
                    <button class="edu-tab active" data-tab="phases">Moon Phases</button>
                    <button class="edu-tab" data-tab="facts">Cosmic Facts</button>
                    <button class="edu-tab" data-tab="mythology">Mythology</button>
                    <button class="edu-tab" data-tab="photography">Photography</button>
                </div>
            </div>
            <div class="education-content">
                <div class="edu-panel active" id="phasesPanel">
                    <div class="phases-showcase" id="phasesShowcase">
                        <!-- Phase cards will be generated here -->
                    </div>
                </div>
                <div class="edu-panel" id="factsPanel">
                    <div class="facts-container" id="factsContainer">
                        <!-- Facts will be generated here -->
                    </div>
                </div>
                <div class="edu-panel" id="mythologyPanel">
                    <div class="mythology-container" id="mythologyContainer">
                        <!-- Mythology content will be generated here -->
                    </div>
                </div>
                <div class="edu-panel" id="photographyPanel">
                    <div class="photography-container" id="photographyContainer">
                        <!-- Photography tips will be generated here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Settings -->
        <section class="location-section">
            <div class="location-header">
                <h3 class="section-title">Observatory Location</h3>
                <div class="location-status" id="locationStatus">
                    <span class="status-indicator"></span>
                    <span class="status-text">Location not set</span>
                </div>
            </div>
            <div class="location-content">
                <div class="location-inputs">
                    <div class="input-group">
                        <label class="input-label">Latitude</label>
                        <input type="number" id="latitudeInput" class="form-control" placeholder="40.7128" step="0.0001" min="-90" max="90">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Longitude</label>
                        <input type="number" id="longitudeInput" class="form-control" placeholder="-74.0060" step="0.0001" min="-180" max="180">
                    </div>
                    <button id="detectLocationBtn" class="btn btn--primary">
                        <span class="btn-icon">üåç</span>
                        Auto-Detect Location
                    </button>
                </div>
                <div class="location-info" id="locationInfo">
                    <div class="info-item">
                        <span class="info-label">Time Zone:</span>
                        <span class="info-value" id="timeZone">UTC</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Local Time:</span>
                        <span class="info-value" id="localTime">--:--</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Advanced Modal System -->
    <div id="helpModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Lunar Observatory Guide</h2>
                <button id="closeModal" class="modal-close">‚úï</button>
            </div>
            <div class="modal-content">
                <div class="guide-content">
                    <div class="guide-section">
                        <h4>Navigation Controls</h4>
                        <ul class="guide-list">
                            <li><kbd>‚Üê</kbd> <kbd>‚Üí</kbd> Navigate days</li>
                            <li><kbd>?</kbd> Open this guide</li>
                            <li><kbd>Esc</kbd> Close modals</li>
                            <li><kbd>Space</kbd> Return to today</li>
                        </ul>
                    </div>
                    <div class="guide-section">
                        <h4>3D Moon Controls</h4>
                        <ul class="guide-list">
                            <li>Click and drag to rotate</li>
                            <li>Scroll to zoom in/out</li>
                            <li>Double-click to reset view</li>
                        </ul>
                    </div>
                    <div class="guide-section">
                        <h4>Features</h4>
                        <ul class="guide-list">
                            <li>Real-time 3D moon rendering</li>
                            <li>Accurate astronomical calculations</li>
                            <li>7-day lunar forecast</li>
                            <li>Educational content library</li>
                            <li>Location-based observations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Share Moon Phase</h2>
                <button id="closeShareModal" class="modal-close">‚úï</button>
            </div>
            <div class="modal-content">
                <div class="share-options">
                    <button id="shareTwitter" class="share-btn twitter-btn">
                        <span class="share-icon">üê¶</span>
                        Share on Twitter
                    </button>
                    <button id="shareFacebook" class="share-btn facebook-btn">
                        <span class="share-icon">üìò</span>
                        Share on Facebook
                    </button>
                    <button id="downloadScreenshot" class="share-btn download-btn">
                        <span class="share-icon">üì∑</span>
                        Download Screenshot
                    </button>
                    <button id="copyLink" class="share-btn copy-btn">
                        <span class="share-icon">üîó</span>
                        Copy Link
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification System -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Performance Indicator -->
    <div class="performance-indicator" id="performanceIndicator">
        <div class="fps-counter" id="fpsCounter">60 FPS</div>
    </div>

    <script src="app.js"></script>
</body>
</html>